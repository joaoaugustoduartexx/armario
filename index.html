<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYCloset 7.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="app-header">
        <h1>Clara Yugawa Closet</h1>
    </header>

    <main id="app-content">
        
        <section id="screen-closet" class="screen active">
            
            <div id="compare-selection-banner" class="selection-banner" style="display: none;">
                <span>Selecione o look para comparar</span>
                <button onclick="cancelCompareMode()">Cancelar</button>
            </div>

            <div class="search-container">
                <i class="material-icons">search</i>
                <input type="text" id="closet-search" placeholder="Buscar tag (ex: Piscina)..." onkeyup="renderCloset()">
            </div>

            <div class="filter-bar">
                <button class="filter-btn active" onclick="filterCloset('all')">Tudo</button>
                <button class="filter-btn" onclick="filterCloset('looks')">âœ¨ Looks</button>
                <button class="filter-btn" onclick="filterCloset('inteiro')">Vestidos</button>
                <button class="filter-btn" onclick="filterCloset('superior')">Camisetas</button>
                <button class="filter-btn" onclick="filterCloset('inferior')">Baixo</button>
                <button class="filter-btn" onclick="filterCloset('calcado')">Sapatos</button>
                <button class="filter-btn" onclick="filterCloset('acessorio')">AcessÃ³rios</button>
            </div>

            <div id="subfilter-area" class="dropdown-container" style="display: none;">
                <label id="subfilter-label">Filtrar:</label>
                <select id="subfilter-select" onchange="applySubFilter()">
                    </select>
            </div>

            <div id="closet-grid" class="closet-grid"></div>
        </section>

        <section id="screen-viewer" class="screen">
            <div id="viewer-empty-state" style="text-align:center; padding:50px; color:#999;">
                <i class="material-icons" style="font-size: 50px;">checkroom</i>
                <p>Selecione um look no ArmÃ¡rio para visualizar.</p>
            </div>

            <div id="viewer-content" style="display:none;">
                <div class="viewer-header">
                    <h2 id="viewer-title">Visualizar</h2>
                    <button class="btn-compare-toggle" onclick="startCompareFromViewer()">ðŸ†š Comparar</button>
                </div>
                
                <div class="comparison-container" id="comparison-container">
                    <div class="look-canvas read-only" id="canvas-side-a"></div>
                    <div class="look-canvas read-only" id="canvas-side-b" style="display:none;">
                        <div id="look-b-render" style="width:100%; height:100%;"></div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-clear-look" id="btn-delete-viewer" onclick="deleteCurrentLookFromViewer()" style="color:red; background:#fff0f0;">Excluir Look</button>
                </div>
            </div>
        </section>

        <section id="screen-create" class="screen">
            <div class="look-type-control">
                <label><input type="radio" name="lookMode" value="separados" checked onchange="toggleLookMode()"> 2 PeÃ§as</label>
                <label><input type="radio" name="lookMode" value="unico" onchange="toggleLookMode()"> PeÃ§a Ãšnica</label>
            </div>

            <div class="canvas-area">
                <div class="look-canvas">
                    <div class="upper-row">
                        <div class="slot slot-side" data-category="acessorio" onclick="openSelector('acessorio')">
                            <span class="placeholder-icon">ðŸ‘œ</span>
                            <img src="" class="slot-img">
                            <button class="remove-item-btn" onclick="clearSlot(event, 'acessorio')">Ã—</button>
                        </div>
                        <div class="torso-column">
                            <div id="mode-separados" class="mode-group">
                                <div class="slot slot-upper" data-category="superior" onclick="openSelector('superior')">
                                    <span class="placeholder-text">Camiseta / Top</span>
                                    <img src="" class="slot-img">
                                    <button class="remove-item-btn" onclick="clearSlot(event, 'superior')">Ã—</button>
                                </div>
                                <div class="slot slot-lower" data-category="inferior" onclick="openSelector('inferior')">
                                    <span class="placeholder-text">CalÃ§a / Saia</span>
                                    <img src="" class="slot-img">
                                    <button class="remove-item-btn" onclick="clearSlot(event, 'inferior')">Ã—</button>
                                </div>
                            </div>
                            <div id="mode-unico" class="mode-group" style="display: none;">
                                <div class="slot slot-fullbody" data-category="inteiro" onclick="openSelector('inteiro')">
                                    <span class="placeholder-text">Vestido</span>
                                    <img src="" class="slot-img">
                                    <button class="remove-item-btn" onclick="clearSlot(event, 'inteiro')">Ã—</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slot slot-feet" data-category="calcado" onclick="openSelector('calcado')">
                        <span class="placeholder-icon">ðŸ‘ </span>
                        <img src="" class="slot-img">
                        <button class="remove-item-btn" onclick="clearSlot(event, 'calcado')">Ã—</button>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-save-look" onclick="saveLook()">ðŸ’– Salvar</button>
                <button class="btn-compare-create" onclick="startCompareFromCreate()">ðŸ†š Comparar</button>
                <button class="btn-clear-look" onclick="resetCanvas()">Limpar</button>
            </div>
        </section>

        <section id="screen-add" class="screen">
            <div class="form-container">
                <h2>Nova PeÃ§a</h2>
                <div class="image-upload-box" onclick="document.getElementById('file-input').click()">
                    <img id="preview-img" src="" style="display:none;">
                    <div id="upload-placeholder">
                        <i class="material-icons" style="font-size: 40px; color: #ccc;">add_a_photo</i>
                        <p>Enviar Foto<br><small>(PNG sem fundo)</small></p>
                    </div>
                </div>
                <input type="file" id="file-input" accept="image/*" hidden onchange="handleImageUpload(this)">

                <div class="input-group">
                    <label>Categoria Principal</label>
                    <select id="new-category" onchange="updateSubcategoryDatalist()">
                        <option value="acessorio">AcessÃ³rio</option>
                        <option value="inteiro">PeÃ§a Ãšnica (Vestido)</option>
                        <option value="superior">Camiseta / Parte de Cima</option>
                        <option value="inferior">Parte de Baixo</option>
                        <option value="calcado">CalÃ§ado</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Subcategoria (Ex: Regata, Longo...)</label>
                    <input list="subcat-options" id="new-subcategory" placeholder="Selecione ou digite nova...">
                    <datalist id="subcat-options"></datalist>
                </div>

                <div class="input-group">
                    <label>Tags (Ex: Piscina, Short rosa da mÃ£e...)</label>
                    <div class="tags-input-container">
                        <input type="text" id="tag-input" placeholder="Digite e dÃª Enter">
                        <button type="button" onclick="addTag()">+</button>
                    </div>
                    <div id="tags-list" class="tags-list"></div>
                </div>

                <button class="btn-primary" onclick="saveNewItem()">Salvar no ArmÃ¡rio</button>
            </div>
        </section>
    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="switchScreen('screen-closet', this)">
            <i class="material-icons">checkroom</i><span>ArmÃ¡rio</span>
        </button>
        <button class="nav-item" onclick="switchScreen('screen-viewer', this)">
            <i class="material-icons">visibility</i><span>Provador</span>
        </button>
        <button class="nav-item" onclick="switchScreen('screen-create', this)">
            <i class="material-icons">style</i><span>Montar</span>
        </button>
        <button class="nav-item" onclick="switchScreen('screen-add', this)">
            <i class="material-icons">add_circle_outline</i><span>Adicionar</span>
        </button>
    </nav>

    <div id="selector-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Escolher PeÃ§a</h3>
                <button onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-search-bar">
                <input type="text" id="modal-search-input" placeholder="Pesquisar..." onkeyup="filterModalItems()">
                <i class="material-icons">search</i>
            </div>
            <div id="modal-grid" class="modal-grid"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>